
<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>專為中學生寫的 C 語言程式書 >>  習題</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.9.0-alpha2/katex.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/0.6.2/pure-min.css">
    <link rel="stylesheet" href="../../book.css">
</head>
<body>

<div class="header pure-menu pure-menu-horizontal">
  <ul id="topBar" class="pure-menu-list">
    <li id="bookTitle" class="pure-menu-item"><a href="README.html" class="pure-menu-link">專為中學生寫的 C 語言程式書</a></li>
  </ul>
</div>

<div id="layout">
  <a href="#menu" id="menuLink" class="menu-link"><span></span></a>
  <div id="menu">
    <div id="sideMenu" class="pure-menu">
      <div id="home" class="pure-menu-heading">
        <a href="../../index.html">⮌</a>
      </div>
      <ul class="pure-menu-list" id="bookBox"><li class="pure-menu-item"><a href="README.html" class="pure-menu-link">前言</a></li>
<li class="pure-menu-item"><a href="basic.html" class="pure-menu-link">基礎語法</a></li>
<li class="pure-menu-item"><a href="function.html" class="pure-menu-link">函數</a></li>
<li class="pure-menu-item"><a href="array.html" class="pure-menu-link">陣列</a></li>
<li class="pure-menu-item"><a href="string.html" class="pure-menu-link">字串</a></li>
<li class="pure-menu-item"><a href="structure.html" class="pure-menu-link">結構</a></li>
<li class="pure-menu-item"><a href="pointer.html" class="pure-menu-link">指標</a></li>
<li class="pure-menu-item"><a href="parameter.html" class="pure-menu-link">參數傳遞</a></li>
<li class="pure-menu-item"><a href="include.html" class="pure-menu-link">引用檔</a></li>
<li class="pure-menu-item"><a href="module.html" class="pure-menu-link">模組化</a></li>
<li class="pure-menu-item"><a href="callback.html" class="pure-menu-link">回呼</a></li>
<li class="pure-menu-item"><a href="recursive.html" class="pure-menu-link">遞迴</a></li>
<li class="pure-menu-item"><a href="mt.html" class="pure-menu-link">範例：翻譯系統</a></li>
<li class="pure-menu-item"><a href="advance.html" class="pure-menu-link">進階主題</a></li>
<li class="pure-menu-item"><a href="exam.html" class="pure-menu-link">習題</a></li></ul>
    </div>
  </div>
  <div id="main">
    <div class="content" id="viewBox">
      <div id="mdBox"><h2 id="-">習題</h2>
<p>1 - 請寫一個程式計算 10! ，也就是 <code>10*9*8*....*1</code> 。</p>
<p>2 - 請寫一個程式印出九九乘法表。</p>
<p>3 - 請檢查某數是否為質數？ 範例： isPrime(17) =&gt; true</p>
<p>4 - 請在一個已經排序的陣列中之正確位置插入一個數值。(範例： insert([1,2,5,6,7], 3) =&gt; [1,2,3,5,6,7])</p>
<p>5 - 請算出某陣列的平均值？(範例： mean([1,2,3,4,5]) =&gt; 3)</p>
<p>6 - 請寫一個函數計算兩矩陣相加？(範例： add([[1,2],[3,4]], [[1,1],[1,1]]) =&gt; [[2,3], [4,5]])</p>
<p>7 - 寫一個程式把矩陣轉置。(範例：transpose([[1,2,3], [3,2,1]]) =&gt; [[1,3], [2,2], [3,1]])</p>
<p>8 - 請寫一個函數可以傳回陣列的映射值？(範例：map(sqrt, [1,4,9])= [1,2,3])</p>
<p>9 - 請用遞迴計算 n! = n<em>…</em>2*1 ？(範例： factorial(3) = 6)</p>
<p>10 - 以結構實作矩陣 Matrix</p>
<h2 id="-">解答</h2>
<p>1 - 請寫一個程式計算 10! ，也就是 <code>10*9*8*....*1</code> 。</p>
<pre><code class="lang-C">// 請寫一個程式計算 10! ，也就是 10*9*8*....*1 。
#include &lt;stdio.h&gt;

int main() {
  int p = 1;
  for (int i=10; i&gt;=1; i--) {
    p = p * i;
  }
  printf(&quot;10!=%d\n&quot;, p);
}

/*
D:\Dropbox\mdbookspace\web\code\c\exam&gt;gcc -std=c99 factorial.c -o factorial

D:\Dropbox\mdbookspace\web\code\c\exam&gt;factorial
10!=3628800
*/
</code></pre>
<p>2 - 請寫一個程式印出九九乘法表。</p>
<pre><code class="lang-C">// 請寫一個程式印出九九乘法表。
#include &lt;stdio.h&gt;

int main() {
  for (int i=2; i&lt;=9; i++) {
    for (int j=2; j&lt;=9; j++) {
      printf(&quot;%d*%d=%d\n&quot;, i, j, i*j);
    }
  }
}

/*

D:\Dropbox\mdbookspace\web\code\c\exam&gt;gcc -std=c99 table99.c -o table99

D:\Dropbox\mdbookspace\web\code\c\exam&gt;table99
2*2=4
2*3=6
2*4=8
...
9*7=63
9*8=72
9*9=81
*/
</code></pre>
<p>3 - 請檢查某數是否為質數？ 範例： isPrime(17) =&gt; true</p>
<pre><code class="lang-C">// 請檢查某數是否為質數？ 範例： isPrime(17) =&gt; true
#include &lt;stdio.h&gt;

int isPrime(int n) {
  for (int i=2; i&lt;n; i++) {
    if (n%i==0) 
      return 0;
  }
  return 1;
}

int main() {
  printf(&quot;isPrime(19)=%d\n&quot;, isPrime(19));
  printf(&quot;isPrime(21)=%d\n&quot;, isPrime(21));
}

/*
D:\Dropbox\mdbookspace\web\code\c\exam&gt;gcc -std=c99 isPrime.c -o isPrime

D:\Dropbox\mdbookspace\web\code\c\exam&gt;isPrime
isPrime(19)=1
isPrime(21)=0
*/
</code></pre>
<p>4 - 請在一個已經排序的陣列中之正確位置插入一個數值。(範例： insert([1,2,5,6,7], 3) =&gt; [1,2,3,5,6,7])</p>
<pre><code class="lang-C">// 請在一個已經排序的陣列中之正確位置插入一個數值。(範例： insert([1,2,5,6,7], 3) =&gt; [1,2,3,5,6,7])
#include &lt;stdio.h&gt;

void array_insert(int a[], int *length, int item) {
  for (int i=0; i&lt;*length; i++) {
    if (a[i] &gt; item) { // 找到插入點
      // 把插入點之後的元素通通向後搬一格
      for (int ti=*length; ti&gt;i; ti--) {
        a[ti] = a[ti-1];
      }      
      a[i] = item; // 把新增元素放進插入點
      break;
    }
  }
  *length += 1; // 新增了一個，長度必須加一
}

void array_print(int a[], int length) {
  for (int i=0; i&lt;length; i++) {
    printf(&quot;%d &quot;, a[i]);
  }
  printf(&quot;\n&quot;);
}

int main() {
  int a[10]={1,2,5,6,7}, len=5;
  array_print(a, len);
  array_insert(a, &amp;len, 3);
  array_print(a, len);
}

/*
D:\Dropbox\mdbookspace\web\code\c\exam&gt;gcc -std=c99 arrayInsert.c -o arrayInsert

D:\Dropbox\mdbookspace\web\code\c\exam&gt;arrayInsert
1 2 5 6 7
1 2 3 5 6 7
*/
</code></pre>
<p>5 - 請算出某陣列的平均值？(範例： mean([1,2,3,4,5]) =&gt; 3)</p>
<pre><code class="lang-C">// 請算出某陣列的平均值？(範例： mean([1,2,3,4,5]) =&gt; 3)
#include &lt;stdio.h&gt;

double mean(double a[], int length) {
  double sum=0;
  for (int i=0; i&lt;length; i++) {
    sum += a[i];
  }
  return sum/length;
}

int main() {
  double a[] = {1,2,3,4,5};
  printf(&quot;mean({1,2,3,4,5})=%6.2f\n&quot;, mean(a, 5));
}

/*
D:\Dropbox\mdbookspace\web\code\c\exam&gt;gcc -std=c99 mean.c -o mean

D:\Dropbox\mdbookspace\web\code\c\exam&gt;mean
mean({1,2,3,4,5})=  3.00
*/
</code></pre>
<p>6 - 請寫一個函數計算兩矩陣相加？(範例： add([[1,2],[3,4]], [[1,1],[1,1]]) =&gt; [[2,3], [4,5]])</p>
<pre><code class="lang-C">// 請寫一個函數計算兩矩陣相加？(範例： add([[1,2],[3,4]], [[1,1],[1,1]]) =&gt; [[2,3], [4,5]])
#include &lt;stdio.h&gt;

double matrix_add(double *a, double *b, double *c, int rows, int cols) {
  for (int i=0; i&lt;rows; i++) {
    for (int j=0; j&lt;cols; j++) {
      int cell = i*cols+j;
      c[cell] = a[cell] + b[cell];
    }
  }
}

int matrix_print(double *m, int rows, int cols) {
  for (int i=0; i&lt;rows; i++) {
    for (int j=0; j&lt;cols; j++) {
      int cell = i*cols+j;
      printf(&quot;%6.2f &quot;, m[cell]);
    }
    printf(&quot;\n&quot;);
  }
}

int main() {
  double a[] = {1.,2.,3.,4.}, b[]={1.,1.,1.,1.}, c[4], rows=2, cols=2;
  printf(&quot;========= a ===========\n&quot;);
  matrix_print(a, rows, cols);
  printf(&quot;========= b ===========\n&quot;);
  matrix_print(b, rows, cols);

  matrix_add(a, b, c, rows, cols);

  printf(&quot;========= c ===========\n&quot;);
  matrix_print(c, rows, cols);
}

/*
D:\Dropbox\mdbookspace\web\code\c\exam&gt;gcc -std=c99 matrixAdd.c -o matrixAdd

D:\Dropbox\mdbookspace\web\code\c\exam&gt;matrixAdd
========= a ===========
  1.00   2.00
  3.00   4.00
========= b ===========
  1.00   1.00
  1.00   1.00
========= c ===========
  2.00   3.00
  4.00   5.00
*/
</code></pre>
<p>7 - 寫一個程式把矩陣轉置。(範例：transpose([[1,2,3], [3,2,1]]) =&gt; [[1,3], [2,2], [3,1]])</p>
<pre><code class="lang-C">// 請寫一個程式把矩陣轉置。(範例：transpose([[1,2,3], [3,2,1]]) =&gt; [[1,3], [2,2], [3,1]])
#include &lt;stdio.h&gt;

void matrix_transpose(double *m, int rows, int cols, double *mt) {
  for (int i=0; i&lt;rows; i++) {
    for (int j=0; j&lt;cols; j++) {
      int cell = i*cols+j, tcell = j*rows + i;
      mt[tcell] = m[cell];
    }
  }
}

void matrix_print(double *m, int rows, int cols) {
  for (int i=0; i&lt;rows; i++) {
    for (int j=0; j&lt;cols; j++) {
      int cell = i*cols+j;
      printf(&quot;%6.2f &quot;, m[cell]);
    }
    printf(&quot;\n&quot;);
  }
}

int main() {
  double a[] = {1.,2.,3.,4.,5.,6.}, b[6], rows=2, cols=3;
  printf(&quot;========= a ===========\n&quot;);
  matrix_print(a, rows, cols);

  matrix_transpose(a, rows, cols, b);

  printf(&quot;========= b ===========\n&quot;);
  matrix_print(b, cols, rows);
}

/*
bash-3.2$ gcc matrix_transpose.c -o matrix_transpose
bash-3.2$ ./matrix_transpose
========= a ===========
  1.00   2.00   3.00
  4.00   5.00   6.00
========= b ===========
  1.00   4.00
  2.00   5.00
  3.00   6.00
*/
</code></pre>
<p>8 - 請寫一個函數可以傳回陣列的映射值？(範例：map(sqrt, [1,4,9])= [1,2,3])</p>
<pre><code class="lang-C">// 請寫一個函數可以傳回陣列的映射值？(範例：map(sqrt, [1,4,9])= [1,2,3])
#include &lt;stdio.h&gt;
#include &lt;math.h&gt;

void array_print(double a[], int length) {
  for (int i=0; i&lt;length; i++) {
    printf(&quot;%6.2f &quot;, a[i]);
  }
  printf(&quot;\n&quot;);
}

void map(double (*f)(double), double a[], int length, double fa[]) {
  for (int i=0; i&lt;length; i++) {
    fa[i] = f(a[i]);
  }
}

int main() {
  double a[]={1.,4.,9.}, fa[3];
  int len=3;
  printf(&quot;a=&quot;);
  array_print(a, len);
  map(sqrt, a, len, fa);
  printf(&quot;fa=&quot;);
  array_print(fa, len);
}

/*
D:\Dropbox\mdbookspace\web\code\c\exam&gt;gcc -std=c99 map.c -o map

D:\Dropbox\mdbookspace\web\code\c\exam&gt;map
a=  1.00   4.00   9.00
fa=  1.00   2.00   3.00
*/
</code></pre>
<p>9 - 請用遞迴計算 n! = n<em>…</em>2*1 ？(範例： factorial(3) = 6)</p>
<pre><code class="lang-C">// 請用遞迴計算 n! = n*…*2*1 ？(範例： factorial(3) = 6)
#include &lt;stdio.h&gt;
#include &lt;math.h&gt;

int factorial(int n) {
  if (n == 1) 
    return 1;
  return n*factorial(n-1);
}

int main() {
  printf(&quot;factorial(3)=%d\n&quot;, factorial(3));
}

/*
D:\Dropbox\mdbookspace\web\code\c\exam&gt;gcc -std=c99 rfactorial.c -o rfactorial

D:\Dropbox\mdbookspace\web\code\c\exam&gt;rfactorial
factorial(3)=6
*/
</code></pre>
<p>10 - 以結構實作矩陣 Matrix</p>
<pre><code class="lang-C">// 以結構實作矩陣 Matrix (範例： add([[1,2],[3,4]], [[1,1],[1,1]]) =&gt; [[2,3], [4,5]])
#include &lt;stdio.h&gt;

typedef struct {
    double *m;
    int rows, cols;
} Matrix;

#define MATRIX_CELL(mat,i,j) (i*mat-&gt;cols+j)

void matrix_add(Matrix* a, Matrix* b, Matrix* c) {
  for (int i=0; i &lt; a-&gt;rows; i++) {
    for (int j=0; j &lt; a-&gt;cols; j++) {
      int cell = MATRIX_CELL(a, i, j);
      c-&gt;m[cell] = a-&gt;m[cell] + b-&gt;m[cell];
    }
  }  
}

void matrix_print(Matrix* m) {
  for (int i=0; i&lt;m-&gt;rows; i++) {
    for (int j=0; j&lt;m-&gt;cols; j++) {
      int cell = MATRIX_CELL(m, i, j);
      printf(&quot;%6.2f &quot;, m-&gt;m[cell]);
    }
    printf(&quot;\n&quot;);
  }
}

int main() {
  double ma[] = {1,2,3,4}, mb[]={1,1,1,1}, mc[4];
  Matrix a = {.m=ma, .rows=2, .cols=2};
  Matrix b = {.m=mb, .rows=2, .cols=2};
  Matrix c = {.m=mc, .rows=2, .cols=2};

  printf(&quot;========= a ===========\n&quot;);
  matrix_print(&amp;a);
  printf(&quot;========= b ===========\n&quot;);
  matrix_print(&amp;b);

  matrix_add(&amp;a, &amp;b, &amp;c);

  printf(&quot;========= c ===========\n&quot;);
  matrix_print(&amp;c);
  return 0;
}

/*
bash-3.2$ gcc matrix.c -o matrix0
bash-3.2$ ./matrix0
========= a ===========
  1.00   2.00
  3.00   4.00
========= b ===========
  1.00   1.00
  1.00   1.00
========= c ===========
  2.00   3.00
  4.00   5.00
*/
</code></pre>
</div>
      <div style="text-align:center">
        <span class="footnote">
        
        </span>
      </div>
    </div>
  </div>
</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
<script src="../../book.js"></script>
</body>
</html>
